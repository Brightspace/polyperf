<template id="test-template"><div><ratings-element></ratings-element></div></template>

<link rel="import" href="../../bower_components/paper-ripple/paper-ripple.html">

<dom-module id="ratings-element">
  <template strip-whitespace>
    <style>
      :host {
        display: inline-block;
        cursor: pointer;
        user-select: none;
        font-size: 1.5em;
        margin: 4px;
        padding: 8px;
        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
                0 1px 5px 0 rgba(0, 0, 0, 0.12),
                0 3px 1px -2px rgba(0, 0, 0, 0.2);
      }

      :host([rating="1"]) > .one,
      :host([rating="2"]) > .one,
      :host([rating="3"]) > .one,
      :host([rating="4"]) > .one,
      :host([rating="5"]) > .one,
      :host([rating="2"]) > .two,
      :host([rating="3"]) > .two,
      :host([rating="4"]) > .two,
      :host([rating="5"]) > .two,
      :host([rating="3"]) > .three,
      :host([rating="4"]) > .three,
      :host([rating="5"]) > .three,
      :host([rating="4"]) > .four,
      :host([rating="5"]) > .four,
      :host([rating="5"]) > .five {
        color: goldenrod;
      }

      span {
        padding: 4px 8px;
      }
    </style>
    <span class="one">⭑</span>
    <span class="two">⭑</span>
    <span class="three">⭑</span>
    <span class="four">⭑</span>
    <span class="five">⭑</span>
  </template>
  <script>
    Polymer({

      is: 'ratings-element',

      hostAttributes: { // sets attributes
        tabIndex: 0,
        role: 'slider'
      },

      listeners: { // adds event listeners
        keydown: '_keyHandler',
        down: '_downHandler'
      },

      properties: {
        rating: {
          reflectToAttribute: true, // sets attribute
          notify: true
        }
      },

      _downHandler: function(e) {
        if (!this._ripple) {
          this._ripple = document.createElement('paper-ripple');
        }
        var i = Array.from(Polymer.dom(this.root).querySelectorAll('span')).indexOf(e.target);
        if (e.target.localName == 'span') {
          e.target.style.position = 'relative';
          Polymer.dom(e.target).appendChild(this._ripple);
          this._ripple.uiDownAction(e);
        }
        this.rating = i + 1;
      },

      _keyHandler: function(e) {
        var current = this.rating || 0;
        if (e.keyCode == 37) {
          this.rating = Math.max(current - 1, 0);
        } else if (e.keyCode == 39) {
          this.rating = Math.min(current + 1, 5);
        }
      }

    });
  </script>
</dom-module>